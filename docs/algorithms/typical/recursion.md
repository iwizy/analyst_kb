# Рекурсия

Рекурсия - подход, при котором функция вызывает сама себя для решения
подзадачи меньшего размера. Метод удобен для деревьев, вложенных структур и
задач типа divide-and-conquer.

## Когда использовать

- обход дерева, графа, файловой структуры;
- парсинг вложенных документов (JSON/XML);
- задачи с естественной декомпозицией (факториал, merge sort, DFS).

## Обязательные элементы рекурсивного алгоритма

- базовый случай (остановка);
- рекурсивный шаг (переход к меньшей подзадаче);
- гарантия, что шаг приближает к остановке.

## Пример: факториал

```python
def factorial(n):
    if n <= 1:
        return 1
    return n * factorial(n - 1)
```

## Визуализация стека вызовов

```kroki-plantuml
@startuml
participant "factorial(4)" as F4
participant "factorial(3)" as F3
participant "factorial(2)" as F2
participant "factorial(1)" as F1

F4 -> F3 : 4 * factorial(3)
F3 -> F2 : 3 * factorial(2)
F2 -> F1 : 2 * factorial(1)
F1 --> F2 : 1
F2 --> F3 : 2
F3 --> F4 : 6
@enduml
```

## Пример: рекурсивный обход дерева (DFS)

```python
def dfs(node):
    if node is None:
        return
    process(node)
    dfs(node.left)
    dfs(node.right)
```

## Типичные ошибки

- отсутствие базового случая;
- слишком глубокая рекурсия и переполнение стека;
- повторные вычисления без мемоизации в задачах оптимизации.

## Чек-лист качества

- Базовый случай корректен и достижим.
- Глубина рекурсии контролируема для ожидаемых данных.
- Есть альтернатива через цикл/стек, если рекурсия рискованна.
