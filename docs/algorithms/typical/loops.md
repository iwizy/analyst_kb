# Циклы и итеративные шаблоны

Итеративные алгоритмы — основа производительных систем: потоковая обработка, валидация, агрегация, sliding windows.

## Уровни сложности

### Базовый уровень

- использовать for/while правильно;
- понимать инвариант цикла;
- избегать off-by-one ошибок.

### Средний уровень

- применять two pointers и sliding window;
- строить односкановые (single-pass) алгоритмы;
- анализировать амортизированную сложность.

### Продвинутый уровень

- проектировать потоковые алгоритмы с bounded memory;
- использовать монотонные очереди и стеки;
- оптимизировать итерации для больших данных.

## Ключевые шаблоны

| Шаблон | Идея | Сложность |
| --- | --- | --- |
| Single pass | один проход по данным | O(n) |
| Two pointers | два указателя на массиве/строке | O(n) |
| Sliding window | подокно с обновляемой метрикой | O(n) |
| Prefix sums | предварительные накопленные суммы | O(n) prep, O(1) query |

## Пример: sliding window (максимум суммы подмассива длины k)

```text
max_sum_k(a, k):
  window = sum(a[0..k-1])
  best = window
  for i in k..len(a)-1:
    window += a[i] - a[i-k]
    best = max(best, window)
  return best
```

- Время: `O(n)` вместо `O(n*k)`.

## Пример: two pointers (удалить дубликаты в sorted массиве)

```text
remove_duplicates(a):
  if len(a) == 0: return 0
  slow = 0
  for fast in 1..len(a)-1:
    if a[fast] != a[slow]:
      slow += 1
      a[slow] = a[fast]
  return slow + 1
```

## Плюсы и минусы

| Плюсы | Минусы |
| --- | --- |
| низкий memory overhead | выше риск граничных ошибок |
| хорошая производительность на больших n | логика может быть менее очевидной |
| подходит для потоковой обработки | требует аккуратных инвариантов |

## Типичные ошибки

- неверные границы цикла;
- изменение массива во время обхода без инварианта;
- неочевидные условия выхода из while;
- пропуск проверки пустого входа.
## Задачи для самопроверки

1. Реализуйте sliding window для минимальной длины подмассива с суммой >= S.
2. Напишите two pointers решение для проверки палиндрома.
3. Преобразуйте вложенный O(n^2) цикл в O(n) или O(n log n).

## Источники и дальнейшее изучение

- LeetCode two-pointers/sliding-window patterns.
- Skiena, chapter on algorithmic patterns.
