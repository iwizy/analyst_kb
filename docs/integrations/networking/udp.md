# UDP

UDP используется там, где важны минимальные задержки и допустима частичная потеря пакетов, либо надежность реализуется на уровне приложения.

## Уровни сложности

### Базовый уровень

- понимать отличие UDP от TCP;
- знать, что UDP не гарантирует доставку и порядок;
- выбирать UDP только для подходящих сценариев.

### Средний уровень

- внедрять app-level ack/retry/FEC при необходимости;
- использовать протоколы поверх UDP (RTP, QUIC, CoAP);
- учитывать NAT traversal и firewall ограничения.

### Продвинутый уровень

- проектировать высоконагруженные real-time потоки;
- балансировать jitter, packet loss и bitrate;
- внедрять адаптивные стратегии доставки в edge/IoT системах.

## Когда использовать UDP

| Сценарий | Почему UDP |
| --- | --- |
| VoIP/video | критична низкая задержка |
| DNS | короткие запросы/ответы |
| Telemetry/IoT | высокочастотные небольшие сообщения |
| QUIC transport | улучшение web-трафика при потерях |

## Ограничения

- нет встроенного контроля доставки и порядка;
- нет механизма congestion control как в TCP (если не реализован протоколом поверх);
- сложнее гарантировать надежность в плохой сети.

## Практики надежности поверх UDP

- sequence numbers + app-level ack;
- selective retransmission для важных пакетов;
- FEC (forward error correction);
- ограничение packet size и fragmentation control.

## Пример сценария

IoT-платформа отправляет телеметрию каждые 500 мс. Для сигналов состояния достаточно at-most-once, для критичных alarm-сообщений добавляется ACK и повтор.

## Контрольные вопросы

1. Допустима ли потеря части сообщений в бизнес-сценарии?
2. Какие механизмы надежности реализованы поверх UDP?
3. Как контролируется влияние NAT/firewall на доставку?
4. Есть ли fallback канал для критичных событий?

## Чек-лист самопроверки

- UDP выбран осознанно по latency-требованиям;
- определены правила надежности на уровне приложения;
- ограничены размер и частота пакетов;
- подготовлены метрики loss/jitter;
- предусмотрен fallback для критичных сообщений.

## Стандарты и источники

- RFC 768 UDP: <https://www.rfc-editor.org/rfc/rfc768>
- RFC 9000 QUIC: <https://www.rfc-editor.org/rfc/rfc9000>
- RFC 3550 RTP: <https://www.rfc-editor.org/rfc/rfc3550>
