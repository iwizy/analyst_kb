# Сущности, атрибуты, контракты

При проектировании API важно учитывать концепции сущностей, атрибутов и контрактов, поскольку они формируют основу для структурирования данных и взаимодействий между клиентом и сервером.

## Сущности

Сущность представляет собой объект или концепцию реального мира, которая описывается в API. Она является основной единицей данных, которую обрабатывает API.

### Примеры сущностей

- Пользователь (User).
- Заказ (Order).
- Товар (Product).
- Пост (Post).
- Комментарий (Comment).
- Пользователь (User).
Сущности определяют структуру данных и могут быть связаны между собой.

#### Пример

Сущность "Пользователь" может быть описана следующим образом:

```
{ "id": 1, "name": "Иван Иванов", "email": "ivan@example.com", "created_at": "2025-01-01T12:00:00Z" }
```

## Атрибуты

Атрибуты — это свойства или характеристики сущности. Они определяют данные, которые связаны с этой сущностью.

### Примеры атрибутов

- id — уникальный идентификатор.
- name — имя пользователя.
- email — адрес электронной почты.
- created_at — дата и время регистрации.
- id — уникальный идентификатор.
- name — название товара.
- price — цена товара.
- stock — количество на складе.
#### Пример

Сущность "Товар" с атрибутами:

```
{ "id": 101, "name": "Ноутбук", "price": 75000, "stock": 15 }
```

Атрибуты могут быть разных типов: строка (string), число (number), дата (date), логическое значение (boolean) и др.

## Контракты

Контракт — это описание того, как клиент и сервер взаимодействуют через API. Он определяет:

- Эндпоинты (URL запросов).
- HTTP-методы (GET, POST, PUT, DELETE и др.).
- Формат данных (обычно JSON или XML).
- Структуру запросов и ответов.
- Ошибки и их обработку.
Контракт фактически представляет собой соглашение о том, как API должно работать.

### Элементы контракта

Эндпоинт:

- URL-адрес для доступа к ресурсу.
- Например: /users, /orders/{id}, /products.
HTTP-метод:

- GET — получение данных.
- POST — создание ресурса.
- PUT или PATCH — обновление ресурса.
- DELETE — удаление ресурса.
Запрос и ответ:

- Тело запроса может содержать данные для создания или обновления ресурса.
- Ответ возвращает данные ресурса или сообщение об ошибке.
Коды состояния (HTTP Status Codes):

- 200 OK — успешный запрос.
- 201 Created — ресурс создан.
- 400 Bad Request — ошибка клиента.
- 404 Not Found — ресурс не найден.
- 500 Internal Server Error — ошибка сервера.
### Пример контракта для API

#### Получение списка пользователей

- Эндпоинт: GET /users
- Ответ:
```
[ { "id": 1, "name": "Иван Иванов", "email": "ivan@example.com" }, { "id": 2, "name": "Петр Петров", "email": "petr@example.com" } ]
```

#### Создание пользователя

- Эндпоинт: POST /users
- Тело запроса:
```
{ "name": "Алексей Алексеев", "email": "alex@example.com" }
```

- Ответ:
```
{ "id": 3, "name": "Алексей Алексеев", "email": "alex@example.com", "created_at": "2025-01-01T12:30:00Z" }
```

#### Удаление пользователя

- Эндпоинт: DELETE /users/3
- Ответ:
```
{ "message": "Пользователь успешно удален" }
```

## Связь сущностей, атрибутов и контрактов

- Сущности определяют, какие данные обрабатываются.
- Атрибуты описывают детали этих данных.
- Контракт задаёт правила, по которым эти данные передаются между клиентом и сервером.
## Советы при проектировании API

Следуйте стандартам REST:

- Используйте понятные URL-адреса (/users, /products/{id}).
- Придерживайтесь соглашений HTTP-методов.
Четко определяйте структуру данных:

- Опишите сущности и их атрибуты в спецификации (например, OpenAPI).
Обрабатывайте ошибки корректно:

- Возвращайте понятные сообщения об ошибках с кодами состояния.
Используйте документацию:

- Генерируйте документацию для вашего API (Swagger/OpenAPI).
Продумывайте версионность:

- Добавляйте версию API в URL (например, /v1/users).
Эти принципы помогут сделать API понятным, удобным и устойчивым к изменениям.

> Материал адаптирован по статье `https://iwizy.github.io/integrations/api-design/entity`.

