# Подходы к спецификации требований

Подход к спецификации определяет, в каком формате команда фиксирует требования, как они проходят согласование и как проверяются на приемке. Неверный выбор подхода ведет либо к избыточной бюрократии, либо к потере критичных деталей.

## Как выбрать подход

1. Оценить контекст: продукт, интеграции, регуляторика, скорость изменений.
1. Определить целевую степень формальности: легкая, средняя, строгая.
1. Выбрать основной формат требований и дополнения.
1. Зафиксировать единый шаблон и обязательные поля.
1. Проверять качество требований по чек-листу верификации.

## Уровни формализации

### Легкая спецификация

Когда подходит:

- ранняя продуктовая фаза;
- быстрые итерации;
- низкая регуляторная нагрузка.

Обычно включает:

- user stories;
- acceptance criteria;
- простые диаграммы потоков.

Риск: недодокументированные зависимости и неполные нефункциональные требования.

### Средняя формализация

Когда подходит:

- несколько команд разработки;
- интеграции с внешними системами;
- высокие риски регресса.

Обычно включает:

- user stories/use cases;
- API-контракты;
- список NFR;
- RTM на критичных функциях.

### Строгая формализация

Когда подходит:

- regulated domains;
- контрактная разработка;
- обязательная внешняя приемка.

Обычно включает:

- BRD/SRS в согласованном шаблоне;
- трассировку от требований до тестов;
- формальную процедуру baseline и change control.

## Сравнение шаблонов: Use Case, User Story, JTBD

| Критерий | Use Case | User Story | JTBD |
| --- | --- | --- | --- |
| Фокус | сценарий взаимодействия и альтернативные потоки | пользовательская ценность в итерации | задача и мотивация пользователя |
| Лучший контекст | сложные бизнес-процессы, интеграции | Agile-продукты и быстрые поставки | discovery, исследование потребностей |
| Формат | Actors, Preconditions, Main Flow, Alternate Flow, Postconditions | "Как <роль>, я хочу <действие>, чтобы <ценность>" + acceptance criteria | "Когда <ситуация>, мне нужно <задача>, чтобы <результат>" |
| Плюс | полнота и управляемость | скорость и компактность | глубина понимания "почему" |
| Риск | большой объем документации | поверхностность без критериев | нехватка инженерной детализации |

## Примеры одного требования в разных форматах

### Use Case

```text
UC-12: Оформление частичного возврата
Actor: Оператор
Preconditions: Заказ в статусе "Доставлен"
Main Flow:
1. Оператор открывает заказ
2. Выбирает позиции для возврата
3. Система рассчитывает сумму компенсации
4. Оператор подтверждает возврат
Alternate Flow:
A1. Позиция не подлежит возврату -> показать причину отказа
Postconditions: Создан документ возврата, обновлен баланс клиента
```

### User Story

```text
Как оператор,
я хочу оформить частичный возврат по нескольким позициям,
чтобы закрыть претензию клиента без полного аннулирования заказа.

Acceptance Criteria:
- оператор может выбрать одну или несколько позиций;
- сумма возврата рассчитывается автоматически;
- система сохраняет причину возврата;
- клиент получает уведомление о результате.
```

### JTBD

```text
Когда клиент возвращает часть заказа после доставки,
мне нужно быстро рассчитать корректную сумму компенсации,
чтобы уложиться в SLA обработки претензий и избежать эскалации.
```

## Шаблоны документов

### BRD (Business Requirements Document)

Минимальная структура:

- цель инициативы и ожидаемый бизнес-результат;
- KPI и критерии успеха;
- scope / out-of-scope;
- ключевые ограничения и допущения;
- основные стейкхолдеры и роли.

### SRS (Software Requirements Specification)

Минимальная структура:

- контекст и границы системы;
- функциональные требования;
- нефункциональные требования;
- внешние интерфейсы и контракты;
- критерии валидации/верификации;
- словарь терминов.

### Backlog Item Card

Минимальная структура:

- идентификатор и заголовок;
- описание (story/use case);
- acceptance criteria;
- приоритет;
- зависимости;
- ссылки на дизайн, API, тесты.

### Change Request

Минимальная структура:

- инициатор и причина изменения;
- описание изменения;
- оценка влияния (scope, сроки, бюджет, риски);
- решение (Approved/Rejected/Deferred);
- целевой релиз и ответственный.

## Работа со стандартами

### BABOK

Используйте как методический каркас: термины, задачи аналитика, техники и артефакты.

### IEEE 830

Используйте как исторический reference по структуре SRS и качеству формулировок.

### ISO/IEC/IEEE 29148

Используйте как актуальный стандарт для инженерии требований и структуры спецификаций.

Практическое правило: адаптируйте стандарт под проект, а не проект под стандарт.

## Проверка качества спецификации

Чек-лист перед согласованием:

- у каждого требования есть источник и владелец;
- формулировка однозначна и тестируема;
- указаны граничные условия и негативные сценарии;
- известен приоритет и бизнес-обоснование;
- есть связь с тестами или планом проверки;
- открытые вопросы зафиксированы с ответственными.

## Типичные ошибки

- смешение бизнес-целей, требований и технических решений в одном блоке;
- выбор одного шаблона для всех задач без учета контекста;
- отсутствие единого глоссария;
- формальная ссылка на стандарт без внедрения реальных практик.

## Практические рекомендации

- выбрать один основной шаблон на уровень требований и ограничить вариативность;
- заранее договориться об обязательных полях для каждого требования;
- на сложных доменах комбинировать форматы: User Story + Use Case + схема процесса;
- поддерживать спецификацию в живом состоянии через review и change management.

## Смежные материалы

- [Качество требований](quality.md)
- [Валидация и верификация требований](validation.md)
- [Управление изменениями требований](management/change-management.md)
- [BABOK](../common-competencies/standards/babok.md)
- [IEEE](../common-competencies/standards/ieee.md)
