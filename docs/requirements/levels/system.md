# Системные требования

Системные требования переводят пользовательские сценарии в инженерные обязательства: функции, интерфейсы, ограничения качества и правила обработки ошибок. На этом уровне требования становятся реализуемыми и тестируемыми.

## Цель

- детализировать поведение системы до уровня реализации и проверки;
- зафиксировать FR/NFR, контракты и ограничения;
- создать основу для архитектуры, разработки и QA.

## Состав системных требований

- функциональные требования (FR);
- нефункциональные требования (NFR);
- интерфейсные требования (API, события, форматы данных);
- правила данных и бизнес-правила;
- обработка ошибок, исключений и отказов;
- ограничения платформы и среды.

## Стандартный шаблон

```text
SR-XXX
Источник: <UR/BR/регуляторика>
Описание: <поведение системы>
Предусловия: <когда применяется>
Входы: <данные/события>
Выходы: <результат>
Ошибки/исключения: <что делаем при сбое>
Ограничения: <технические/организационные>
Критерий проверки: <как подтверждаем>
```

## Процесс формирования

1. Декомпозировать UR в атомарные функции и правила.
1. Описать входы/выходы/состояния и пограничные условия.
1. Добавить NFR для критичных потоков.
1. Уточнить API/данные/интеграции и контрактные ограничения.
1. Проверить тестируемость и непротиворечивость.

## Пример

```text
SR-014
Источник: UR-041
Описание: система блокирует учетную запись после 5 неуспешных попыток входа в течение 15 минут.
Предусловия: пользователь активен, MFA не отключена политикой домена.
Входы: события неуспешной аутентификации.
Выходы: статус учетной записи = Blocked; событие аудита.
Ошибки/исключения: при недоступности IdP применяется локальный rate limit.
Ограничения: синхронизация с внешним IdP не реже 1 раза в минуту.
Критерий проверки: блокировка на 5-й попытке, автоматическая разблокировка через 30 минут.
```

## Пример SR + API контракт

| Поле | Пример |
| --- | --- |
| SR ID | SR-RET-022 |
| Контракт | `POST /refunds/calculate` |
| Вход | `orderId`, `positions[]`, `reasonCode` |
| Выход | `refundAmount`, `currency`, `rules[]` |
| Ошибка | `422 INVALID_REASON`, `503 BILLING_UNAVAILABLE` |
| NFR | p95 <= 1 сек при 100 RPS |

## Типичные ошибки

- расплывчатые формулировки («быстро», «надежно», «удобно»);
- отсутствие негативных сценариев;
- дублирование требования в разных местах;
- фиксация технологии без обоснования на уровне SR.

## Практические рекомендации

- каждое SR связывать с UR/BR и ID источника;
- фиксировать критерий проверки одновременно с требованием;
- отделять системное поведение от деталей реализации;
- проводить совместный review BA + Tech Lead + QA.

## Чек-лист качества

- формулировка однозначна и тестируема;
- определены входы/выходы и ошибки;
- есть связь с UR/BR;
- учтены релевантные NFR;
- требование включено в RTM.

## Смежные материалы

- [Пользовательские требования](user.md)
- [Функциональные требования](../types/functional.md)
- [Нефункциональные требования](../types/non-functional.md)
- [Валидация и верификация требований](../validation.md)
