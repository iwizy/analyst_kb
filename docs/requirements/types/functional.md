# Функциональные требования

Функциональные требования (FR) описывают, какие операции и правила должна поддерживать система для пользователей и внешних систем. Это база для реализации бизнес-логики и функционального тестирования.

## Цель

- зафиксировать ожидаемое поведение системы;
- описать условия выполнения и ожидаемый результат;
- подготовить проверяемые acceptance criteria.

## Что обязательно включать

- ID и краткий заголовок;
- источник (BR/UR/регуляторика);
- предусловия и триггер;
- основной поток;
- альтернативные и ошибочные потоки;
- постусловия;
- acceptance criteria.

## Шаблон

```text
FR-XXX
Источник: <UR/BR>
Описание: <что делает система>
Предусловия: <когда сценарий доступен>
Основной поток: <последовательность шагов>
Альтернативные/ошибочные потоки: <исключения>
Постусловия: <состояние после выполнения>
Acceptance Criteria: <проверяемые критерии>
```

## Шаблон Use Case (расширенный)

```text
Use Case ID: UC-XXX
Источник: <BR/UR/регуляторика>
Актор: <роль>
Предусловия: <что должно быть истинно до старта>
Основной сценарий:
1. ...
2. ...
Альтернативные потоки:
A1. ...
A2. ...
Постусловие: <состояние после завершения>
Критерии приемки: <измеримые условия>
```

## Шаблон User Story (расширенный)

```text
Story ID: US-XXX
Источник: <BR/интервью/аналитика>
Как <роль>
Я хочу <действие>
Чтобы <ценность>
Предусловия: <контекст>
Основной сценарий: <ключевые шаги>
Альтернативные потоки: <ошибки/исключения>
Постусловие: <ожидаемый результат>
Критерии приемки: Given/When/Then + метрики
```

## Пример

```text
FR-024
Источник: UR-041
Описание: пользователь может восстановить пароль по email.
Предусловия: учетная запись активна.
Основной поток:
1. Пользователь вводит email.
2. Система отправляет одноразовую ссылку.
3. Пользователь задает новый пароль.
Альтернативные потоки:
- email не найден -> показать нейтральный ответ и записать событие.
Постусловия: пароль обновлен.
Acceptance Criteria:
- ссылка одноразовая и действует 30 минут;
- старый пароль недействителен;
- пользователю отправляется уведомление о смене пароля.
```

## Типовые классы FR

- [CRUD](../../glossary.md#abbr-021)-операции над сущностями;
- переходы состояний (state transitions);
- проверки/валидации данных;
- расчетные правила;
- интеграционные операции и обмен сообщениями.

## Процесс подготовки

1. Взять пользовательский сценарий как источник.
1. Разделить на атомарные функции.
1. Описать happy path и edge-cases.
1. Добавить [AC](../../glossary.md#abbr-002) в измеримом виде.
1. Связать FR с [NFR](../../glossary.md#abbr-053), тестами и задачами.

## Пример decomposition FR

| Уровень | Пример |
| --- | --- |
| UR | Оператор оформляет частичный возврат |
| FR-1 | Система отображает доступные позиции |
| FR-2 | Система рассчитывает сумму компенсации |
| FR-3 | Система сохраняет причину возврата |
| FR-4 | Система отправляет клиенту уведомление |

## Типичные ошибки

- несколько независимых функций в одном FR;
- отсутствие негативных сценариев;
- формулировки без проверяемого результата;
- описание [UI](../../glossary.md#abbr-091) вместо бизнес-поведения;
- отсутствие связи с источником.

## Практические рекомендации

- использовать глаголы действия: создать, рассчитать, заблокировать, отправить;
- проверять FR вопросом: «можно ли сразу написать тест-кейс?»;
- выделять ошибки и исключения отдельными пунктами;
- не смешивать FR и NFR в одной формулировке.

## Инструменты

| Инструмент | Для чего использовать |
| --- | --- |
| Jira / Azure DevOps | Ведение FR, AC, связей с задачами и тестами |
| Confluence / Git docs | Шаблоны требований и журнал изменений |
| Postman / Swagger | Проверка [API](../../glossary.md#abbr-005)-поведения и контрактов для FR интеграций |
| XRay / Zephyr | Привязка FR к тест-кейсам и контроль покрытия |

## Чек-лист качества

- требование атомарно;
- описаны входы, выходы и условия;
- есть AC и альтернативные сценарии;
- есть связь с UR/BR;
- FR включен в трассировку и тестовое покрытие.

## Смежные материалы

- [Пользовательские требования](../levels/user.md)
- [Нефункциональные требования](non-functional.md)
- [Декомпозиция требований](../decomposition.md)
- [Трассировка требований](../management/traceability.md)
