# Нефункциональные требования

Нефункциональные требования (NFR) задают характеристики качества системы и эксплуатационные ограничения. Они определяют, насколько надежно, быстро и безопасно система будет работать в реальном контуре.

## Цель

- зафиксировать измеримые критерии качества;
- снизить архитектурные и эксплуатационные риски;
- сделать проверяемыми требования к производительности, безопасности и надежности.

## Ключевые категории NFR

### Производительность

- время отклика;
- пропускная способность;
- профиль нагрузки.

Пример: `p95 ответа API <= 300 мс при 500 RPS`.

### Надежность и доступность

- uptime;
- MTTR/время восстановления;
- требования к резервированию.

Пример: `доступность сервиса 99.9% в месяц`.

### Безопасность

- аутентификация и авторизация;
- шифрование в канале и хранении;
- аудит действий.

Пример: `MFA обязательна для операций с финансовым риском`.

### Масштабируемость

- целевой рост пользователей и транзакций;
- требования к горизонтальному/вертикальному масштабированию.

Пример: `поддержка 3x роста нагрузки без даунтайма`.

### Эксплуатация и наблюдаемость

- логирование и алертинг;
- мониторинг ключевых SLI;
- требования к восстановлению.

Пример: `критическая ошибка создает алерт не позднее 60 секунд`.

## Шаблон NFR

```text
NFR-XXX
Атрибут качества: <performance/security/...>
Метрика: <что измеряем>
Целевое значение: <порог>
Контекст: <нагрузка, окружение, период>
Метод проверки: <тест/мониторинг>
Ответственный: <роль>
```

## Процесс формулирования

1. Определить риск, который должен контролироваться.
1. Выбрать метрику и единицу измерения.
1. Уточнить контекст проверки (нагрузка, среда, период).
1. Согласовать пороги с архитектурой и эксплуатацией.
1. Связать NFR с функциями и тестами.

## Пример связки

- FR: оформление возврата.
- NFR-021: расчет суммы возврата <= 1 сек (p95) при 200 одновременных операторах.
- NFR-022: все операции возврата записываются в audit log с хранением 12 месяцев.

## Типичные ошибки

- "система должна быть быстрой" без метрики;
- NFR не привязан к конкретному сценарию;
- не задан контекст измерения;
- требования есть, но эксплуатация не мониторит эти метрики.

## Практические рекомендации

- описывать NFR как проверяемый контракт;
- закладывать NFR до проектирования архитектуры;
- проверять NFR не только на приемке, но и в эксплуатации;
- связывать каждый критичный NFR с риском бизнеса.

## Чек-лист качества

- есть метрика и порог;
- понятен метод проверки;
- есть владелец контроля;
- NFR связан с функцией или процессом;
- порог реалистичен для целевой архитектуры.

## Смежные материалы

- [Функциональные требования](functional.md)
- [Критерии качества требований](../quality.md)
- [Системные требования](../levels/system.md)
