# Написание кода: что важно знать аналитику

Аналитику не обязательно писать production-код, но важно понимать, как формулировки требований превращаются в реализацию и где обычно появляются дефекты.

## Уровни сложности

### Базовый уровень

- понимать цикл "требование -> код -> тест";
- знать базовые принципы читаемого кода;
- использовать простые примеры для уточнения требований.

### Средний уровень

- формулировать требования с учетом edge-cases;
- помогать команде проектировать AC в тестируемом формате;
- учитывать технический долг при планировании.

### Продвинутый уровень

- участвовать в design review и обосновании trade-off;
- учитывать эксплуатационные требования (логирование, метрики, безопасность);
- связывать изменения кода с архитектурными решениями и ADR.

## Инженерный цикл изменения

```kroki-plantuml
skinparam monochrome true
start
:Уточнить требование и AC;
:Реализовать изменение;
:Добавить/обновить тесты;
:PR и code review;
if (Проверки пройдены?) then (Да)
  :Merge;
  :Deploy и verify;
else (Нет)
  :Исправить замечания;
endif
stop
```

## Базовые принципы, которые влияют на требования

- KISS: избегать избыточной логики в первой версии;
- DRY: не дублировать правила в нескольких местах;
- YAGNI: не закладывать функциональность без подтвержденной потребности;
- fail-fast: явно обрабатывать некорректные входные данные.

## Мини-пример: проверка AC в коде

```javascript
function canRefund(order) {
  return order.status === 'PAID' && order.paymentAgeDays <= 30;
}
```

Аналитику важно:

- зафиксировать, откуда берется `paymentAgeDays`;
- определить, как обрабатывается граничный день `30`;
- добавить негативный сценарий в тест-кейсы.

## Типовые ошибки

- неопределенные формулировки требований ("быстро", "удобно", "корректно");
- отсутствие критериев приемки для ошибок и отказов;
- большой объем изменений в одном PR;
- неактуальная документация после релиза.

## Чек-лист самопроверки

- требование формулируется так, чтобы его можно было реализовать и протестировать;
- граничные случаи явно описаны;
- изменения покрыты тестами и review;
- влияние на эксплуатацию и мониторинг учтено.

## Контрольные вопросы

1. Какие части требования чаще всего вызывают неоднозначную реализацию?
2. Какие граничные условия должны быть зафиксированы до старта разработки?
3. Как понять, что задача создает неприемлемый технический долг?

## Источники

- Clean Code (R. Martin).
- The Pragmatic Programmer.
- Refactoring (M. Fowler).
