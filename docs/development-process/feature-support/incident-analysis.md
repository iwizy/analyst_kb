# Разбор инцидентов

Разбор инцидентов (postmortem) нужен для устранения первопричин и предотвращения повторов. Цель - улучшать систему, а не искать виноватых.

## Уровни сложности

### Базовый уровень

- фиксировать факты и влияние инцидента;
- восстанавливать таймлайн;
- формулировать корректирующие действия.

### Средний уровень

- применять RCA-методы (5 Why, Fishbone);
- разделять symptoms, causes и contributing factors;
- связывать результаты postmortem с backlog и change management.

### Продвинутый уровень

- использовать error budget и SLO для приоритизации мер;
- проводить incident trend analysis;
- управлять reliability roadmap на квартал.

## Процесс разбора инцидента

```kroki-plantuml
skinparam monochrome true
start
:Собрать факты и impact;
:Построить таймлайн;
:Провести RCA;
:Определить corrective/preventive actions;
:Назначить владельцев и сроки;
:Проверить выполнение и эффект;
stop
```

## Шаблон postmortem

| Поле | Что фиксировать |
| --- | --- |
| Incident ID | ссылка на инцидент |
| Влияние | пользователи, деньги, SLA |
| Таймлайн | обнаружение, эскалация, восстановление |
| Первопричина | техническая/процессная |
| Усиливающие факторы | мониторинг, архитектура, коммуникация |
| Действия | corrective/preventive, owner, due date |
| Проверка эффекта | метрика и дата ревью |

## Пример RCA (кратко)

- Симптом: рост 5xx в сервисе заказов.
- Причина: деградация внешнего API платежей.
- Почему impact высокий: не настроен fallback и circuit breaker.
- Действие: добавить circuit breaker, cache для статусов, пересмотреть timeout budget.

## Типичные ошибки

- «человеческий фактор» как финальный вывод без анализа системы;
- actions без владельца и срока;
- закрытие postmortem без проверки результата.

## Связь с backlog и техдолгом

После postmortem задачи распределяются на:

- срочные reliability-fixes;
- архитектурные улучшения;
- процессные изменения (мониторинг, runbook, эскалация);
- обучение команды и обновление документации.

## Чек-лист самопроверки

- таймлайн и impact подтверждены данными;
- первопричина и усиливающие факторы разделены;
- действия имеют owners, сроки, критерии завершения;
- эффект мер проверяется повторным review.

## Контрольные вопросы

1. Какая первопричина была системной, а не единичной?
2. Какие действия реально предотвращают повторение инцидента?
3. Как postmortem влияет на приоритеты backlog?
4. Какие метрики показывают улучшение надежности?

## Стандарты и источники

- Google SRE (postmortem culture): <https://sre.google/sre-book/postmortem-culture/>
- NIST SP 800-61: <https://csrc.nist.gov/publications/detail/sp/800-61/rev-2/final>
- ITIL 4 Incident/Problem practices: <https://www.axelos.com/>
