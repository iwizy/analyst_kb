# Практические композиции нотаций
Страница показывает, как комбинировать несколько нотаций в единую цепочку от бизнес-цели до технической реализации без разрыва контекста.

## Уровни сложности

### Базовый уровень

- выбрать 2-3 нотации под одну задачу;
- не смешивать уровни абстракции в одной диаграмме;
- согласовать единый словарь терминов.

### Средний уровень

- строить сквозную связку `цель -> процесс -> данные -> архитектура`;
- связывать диаграммы с [требованиями](../glossary.md#term-068) и [ADR](../glossary.md#abbr-003);
- поддерживать актуальность моделей при изменениях.

### Продвинутый уровень

- выстраивать governance набора нотаций на уровне домена;
- вводить quality-критерии ревью диаграмм;
- автоматизировать проверку и публикацию моделей в docs-as-code.

## Шаблон сквозной композиции

| Шаг | Вопрос | Нотация |
| --- | --- | --- |
| 1. Контекст | зачем меняем систему и где ее границы | Goal Map, C4 C1 |
| 2. Процесс | как проходит бизнес-операция | BPMN, eEPC, IDEF0 |
| 3. Данные | какие сущности и связи нужны | ERD, UML Class |
| 4. Взаимодействие | как компоненты общаются | UML Sequence, C4 C2/C3 |
| 5. Решения и контроль | как фиксируется зрелость и риски | Impact Map, maturity models |

## Кейс 1. E-commerce checkout

### Комбинация нотаций

- Goal Map: снизить долю брошенных корзин;
- BPMN: процесс оформления и обработки оплаты;
- ERD: сущности `Order`, `Payment`, `Shipment`;
- C4: контейнеры `Web`, `Order Service`, `Payment Gateway`.

```kroki-plantuml
@startuml
left to right direction
rectangle "Goal Map\nСнизить abandoned cart" as G
rectangle "BPMN\nCheckout flow" as B
rectangle "ERD\nOrder Payment Shipment" as E
rectangle "C4\nWeb + Services + Gateway" as C
G --> B : бизнес-цель
B --> E : данные процесса
E --> C : реализация
@enduml
```

### Что часто идет не так

- BPMN описывает технические детали, а не бизнес-поток;
- ERD создается без связки со сценариями;
- C4 дублирует Sequence без новой информации.

## Кейс 2. Fintech antifraud

| Артефакт | Что фиксирует |
| --- | --- |
| C4 C1/C2 | границы anti-fraud сервиса и интеграций |
| UML Sequence | путь запроса `payment -> scoring -> decision` |
| Decision Tree | правила принятия решения по риску |
| Archimate | связь бизнес- и технологического слоев |

Практика: хранить единый `RiskScore` в терминологии всех моделей, чтобы исключить расхождения между командами.

## Кейс 3. Gov service lifecycle

| Этап | Рекомендуемая нотация |
| --- | --- |
| Проектирование услуги | IDEF0 или BPMN |
| Межведомственные связи | C4 + DFD |
| Аудит причин отказов | Fishbone + Decision Tree |
| Оценка процесса | CMMI/COBIT/ACMM |

## Матрица выбора композиции

| Контекст | Минимальный набор |
| --- | --- |
| Оптимизация процесса | BPMN + ERD |
| Новый цифровой продукт | C4 + BPMN + ERD + Sequence |
| Диагностика проблем качества | Fishbone + Decision Tree + Impact Map |
| Enterprise-инициатива | Archimate + C4 + maturity model |

## Правила качества композиции

1. Один и тот же термин должен иметь одно значение во всех моделях.
2. Каждая следующая диаграмма должна уточнять, а не дублировать предыдущую.
3. На каждую ключевую диаграмму должна быть ссылка на исходное требование/решение.
4. Изменение модели процесса должно инициировать ревью моделей данных и архитектуры.

## Связанные материалы

- [Введение в нотации и моделирование](index.md)
- [BPMN](bpmn.md)
- [C4](c4.md)
- [ERD](erd.md)
- [DFD](dfd.md)
- [Archimate](archimate.md)
- [Impact Map](impact-map.md)

## Стандарты и источники

- UML 2.5.1: <https://www.omg.org/spec/UML/2.5.1>
- BPMN 2.0.2: <https://www.omg.org/spec/BPMN/2.0.2>
- C4 model: <https://c4model.com/>
- Archimate 3.2: <https://pubs.opengroup.org/architecture/archimate3-doc/>
