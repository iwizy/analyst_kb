# Деревья решений

Дерево решений - модель, которая показывает, как результат зависит от набора
условий. В системной аналитике дерево удобно для формализации бизнес-правил,
тарифов, скоринга и логики маршрутизации.

## Когда использовать

- есть много ветвлений "если/то";
- правила должны быть проверяемыми и тестируемыми;
- нужно согласовать логику с бизнесом без программного кода.

## Структура дерева

- Корень: исходная задача (например, "Одобрить заявку?").
- Внутренние узлы: условия.
- Ветви: возможные значения условия.
- Листья: финальные решения или действия.

## Пример: решение по кредитной заявке

```kroki-plantuml
@startmindmap
* Заявка
** Доход >= 120 000?
*** Да
**** Скоринг >= 700?
***** Да: Одобрить
***** Нет: Ручная проверка
*** Нет
**** Есть залог?
***** Да: Ручная проверка
***** Нет: Отказать
@endmindmap
```

На основе дерева формируется таблица правил для реализации:

| Условие 1 | Условие 2 | Условие 3 | Решение |
| --- | --- | --- | --- |
| Доход >= 120 000 | Скоринг >= 700 | - | Одобрить |
| Доход >= 120 000 | Скоринг < 700 | - | Ручная проверка |
| Доход < 120 000 | - | Есть залог | Ручная проверка |
| Доход < 120 000 | - | Нет залога | Отказать |

## Как строить

1. Зафиксируйте полный набор входных параметров.
1. Отсортируйте условия по влиянию на решение.
1. Проверьте, что ветви взаимно исключают друг друга.
1. Сверьте полноту: нет ли "непойманных" сценариев.
1. Сгенерируйте набор тест-кейсов по листьям дерева.

## Типичные ошибки

- дублирующиеся или конфликтующие ветви;
- условия, которые невозможно проверить по данным;
- отсутствие ветки "значение не определено".

## Чек-лист качества

- Каждое решение достижимо и однозначно.
- Любой вход попадает в одну и только одну ветвь.
- По дереву можно автоматически получить тесты.
