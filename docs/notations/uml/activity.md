# UML Activity

Диаграмма активности описывает алгоритм процесса: действия, развилки, параллельные ветви и завершение. Она полезна для декомпозиции бизнес-логики и подготовки критериев приемки.

## Цель и задачи

- представить процесс в формате исполняемой логики;
- зафиксировать условия ветвления и обязательные шаги;
- проверить полноту сценариев до реализации.

## Основные элементы

| Элемент | Назначение |
| --- | --- |
| Initial Node | Начало процесса |
| Action | Выполняемое действие |
| Decision/Merge | Разветвление и объединение ветвей |
| Fork/Join | Параллельные потоки |
| Swimlane | Разделение по ролям/системам |
| Final Node | Завершение процесса |

## Когда применять

- описание бизнес-алгоритма в требованиях;
- детализация шагов автопроцесса перед BPMN;
- построение тест-кейсов по веткам логики.

## Пример

```kroki-plantuml
@startuml
|Клиент|
start
:Заполнить форму заявки;
|Система|
:Проверить обязательные поля;
if (Данные валидны?) then (Да)
  fork
    :Сохранить заявку;
  fork again
    :Отправить уведомление менеджеру;
  end fork
  if (Нужна ручная проверка?) then (Да)
    |Менеджер|
    :Проверить заявку;
    |Система|
    :Зафиксировать решение;
  endif
  :Вернуть статус заявки;
  stop
else (Нет)
  :Вернуть список ошибок;
  stop
endif
@enduml
```

## Как построить диаграмму

1. Определите вход, выход и бизнес-результат процесса.
1. Опишите основной путь без исключений.
1. Добавьте все развилки с взаимоисключающими условиями.
1. Выделите параллельные действия через `fork/join`.
1. Проверьте, что все ветви завершаются явно.

## Типовые ошибки

- условия в `decision` перекрываются или не покрывают все варианты;
- в одной диаграмме смешаны бизнес- и технические шаги;
- нет `final` для альтернативных ветвей.

## Визуальные рекомендации

- подписывайте ветви коротко и однозначно (`Да/Нет`, `Оплачено/Не оплачено`);
- используйте `swimlane` только когда важно показать смену ответственности;
- держите поток слева направо или сверху вниз без "змейки".

## Связь с другими нотациями

- `BPMN`: Activity удобно использовать как черновик перед формализацией BPMN.
- `Sequence`: для сложного шага Activity можно добавить Sequence с системными вызовами.
- `Decision Tree`: сложные условия из Activity выносятся в дерево решений.

## Инструменты

- [PlantUML](../../tools/plantuml.md)
- [Draw.io](../../tools/drawio.md)
