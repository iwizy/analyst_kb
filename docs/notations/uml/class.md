# UML Class

Диаграмма классов показывает статическую структуру предметной области: объекты, свойства, операции и связи. Для аналитика это мост между бизнес-терминами, API-контрактами и схемой данных.

## Цель и задачи

- сформировать единый язык сущностей проекта;
- зафиксировать бизнес-ограничения через связи и кратности;
- подготовить основу для ERD, DTO и доменной модели.

## Основные элементы

| Элемент | Назначение |
| --- | --- |
| Class | Сущность предметной области |
| Attribute | Свойство объекта |
| Operation | Поведение/операция объекта |
| Association | Связь между сущностями |
| Aggregation/Composition | Отношение "часть-целое" |
| Generalization | Наследование |
| Multiplicity | Кратность (`1`, `0..1`, `0..*`, `1..*`) |

## Когда применять

- проектирование доменной модели и API DTO;
- согласование бизнес-правил до реализации БД;
- анализ влияния изменений в сущностях на интеграции.

## Пример

```kroki-plantuml
@startuml
hide empty members
skinparam classAttributeIconSize 0

class Customer {
  +customerId: UUID
  +email: String
  +status: CustomerStatus
}

class Order {
  +orderId: UUID
  +createdAt: DateTime
  +state: OrderState
  +totalAmount(): Money
}

class OrderItem {
  +quantity: int
  +price: Money
}

class Product {
  +sku: String
  +name: String
  +isActive: boolean
}

class Payment {
  +paymentId: UUID
  +method: PaymentMethod
  +status: PaymentStatus
}

Customer "1" -- "0..*" Order : places
Order "1" *-- "1..*" OrderItem : contains
OrderItem "*" --> "1" Product : references
Order "1" -- "0..1" Payment : paid by
@enduml
```

## Как построить диаграмму

1. Составьте словарь доменных сущностей и их идентификаторов.
1. Выделите обязательные атрибуты, влияющие на бизнес-правила.
1. Проставьте типы связей и кратности.
1. Добавьте ключевые операции там, где нужно объяснить поведение.
1. Сверьте модель с ERD и API-контрактами.

## Типовые ошибки

- подмена доменной модели физической схемой БД;
- отсутствие кратностей и направлений связей;
- дублирование одной сущности под разными именами.

## Визуальные рекомендации

- группируйте классы по bounded context или модулю;
- не перегружайте диаграмму техническими полями (`createdBy`, `updatedBy`) если они не влияют на смысл;
- используйте единый стиль имен: `CamelCase` для классов, `camelCase` для атрибутов.

## Связь с другими нотациями

- `ERD`: классы и связи сопоставляются с сущностями и таблицами.
- `C4`: на уровне компонентов можно показать, где хранится и обрабатывается доменная модель.
- `State Machine`: состояния сущности из Class раскрываются в диаграмме состояний.

## Инструменты

- [PlantUML](../../tools/plantuml.md)
- [Draw.io](../../tools/drawio.md)
