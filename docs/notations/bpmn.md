# BPMN

BPMN (Business Process Model and Notation) - стандарт описания бизнес-процессов, который соединяет бизнес-логику, роли и автоматизацию. Нотация отвечает на вопрос: кто, когда и по каким правилам выполняет процесс.

## Цель и задачи

- согласовать единый процесс между бизнесом, аналитикой, разработкой и операциями;
- показать развилки, исключения, таймеры и межсистемный обмен;
- подготовить модель к автоматизации в workflow/BPM-системе.

## Основные элементы

| Группа | Элемент | Назначение |
| --- | --- | --- |
| Flow Objects | Event | старт, промежуточные события, завершение |
| Flow Objects | Task / Subprocess | действие человека или системы |
| Flow Objects | Gateway (XOR/AND/OR) | ветвления и синхронизация |
| Connecting Objects | Sequence Flow | порядок шагов внутри одного пула |
| Connecting Objects | Message Flow | обмен между участниками (пулами) |
| Swimlanes | Pool / Lane | участники и зоны ответственности |
| Artifacts | Data Object / Annotation | документы, комментарии, пояснения |

## Когда применять

- регламентация операционных процессов;
- проектирование процесса, который будет автоматизирован;
- анализ текущего процесса и поиск узких мест.

## Пример процесса

```kroki-plantuml
@startuml
|Клиент|
start
:Отправить заявку;
|Портал|
:Проверить обязательные поля;
if (Поля заполнены?) then (Да)
  :Создать заявку;
  |Скоринг сервис|
  :Оценить риск;
  if (Риск допустим?) then (Да)
    |Менеджер|
    :Подтвердить условия;
    |Портал|
    :Отправить подтверждение;
    stop
  else (Нет)
    |Портал|
    :Отправить отказ;
    stop
  endif
else (Нет)
  |Портал|
  :Вернуть ошибки валидации;
  stop
endif
@enduml
```

## Пошаговый алгоритм построения

1. Зафиксируйте границы процесса: триггер, результат, владельца процесса.
1. Выделите участников и разделите процесс на `pool/lane`.
1. Опишите основной поток (`happy path`) простыми задачами.
1. Добавьте `gateway` для развилок и исключений.
1. Отразите внешние события: таймеры, сообщения, ошибки.
1. Проверьте процесс на 3-5 реальных кейсах.

## Типовые ошибки

- gateway без явных условий на ветвях;
- отсутствие конечных событий для альтернативных путей;
- смешение бизнес- и технических шагов в одном уровне детализации;
- попытка одной диаграммой описать весь домен.

## Визуальные рекомендации

- располагайте поток слева направо, без пересекающихся линий;
- используйте один стиль имен задач: `Глагол + объект`;
- выделяйте критические ветви (исключения, эскалации, SLA) заметными подписями;
- держите на одном листе 10-20 задач, остальное выносите в подпроцессы.

## Связь с другими нотациями

- `UML Activity`: удобна для детального алгоритма внутри задачи BPMN.
- `UML Sequence`: раскрывает технические вызовы внутри сервисной задачи.
- `DFD`: помогает валидировать, что в процессе корректно отражены потоки данных.
- `eEPC`: альтернативный процессный взгляд с акцентом на событие-функция.

## Инструменты

- [Camunda Modeler](../tools/camunda-modeler.md)
- [Draw.io](../tools/drawio.md)
- [PlantUML](../tools/plantuml.md)
