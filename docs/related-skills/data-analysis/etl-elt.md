# [ETL](../../glossary.md#abbr-033)/[ELT](../../glossary.md#abbr-030)

ETL/ELT это практики переноса и преобразования данных между источниками и аналитическим контуром.

## Уровни сложности

### Базовый уровень

- понимать этапы `extract`, `transform`, `load`;
- отличать ETL от ELT;
- задавать требования к качеству и полноте загрузок.

### Средний уровень

- описывать пайплайн как последовательность шагов и проверок;
- учитывать late-arriving data и повторные загрузки;
- формулировать правила обработки ошибок.

### Продвинутый уровень

- проектировать idempotent-пайплайны;
- внедрять data quality gates и observability;
- управлять schema evolution и data contracts.

## ETL vs ELT

| Критерий | ETL | ELT |
| --- | --- | --- |
| Где трансформация | до загрузки | после загрузки в хранилище |
| Когда подходит | legacy [DWH](../../glossary.md#abbr-029) и жесткая схема | cloud DWH, быстрая итерация |
| Гибкость | ниже | выше |
| Требования к DWH | ниже | выше |

## Типовой пайплайн

1. Extract: извлечь данные из источников.
2. Validate raw: проверить полноту и формат.
3. Transform: унифицировать словари и бизнес-правила.
4. Load: загрузить в целевые таблицы.
5. Reconcile: сверить итоги с источником.
6. Publish: обновить витрины/дашборды.

## Инструменты

- Airflow: оркестрация.
- dbt: трансформации и тесты.
- Kafka/Flink: потоковые сценарии.
- Data Catalog: описание наборов, owners, lineage.

## Кейc: финтех-пайплайн транзакций

- Источник: платежный процессинг.
- Риск: дубликаты при ретраях.
- Решение: idempotent key + дедупликация в staging.
- Контроль: алерт при расхождении суммы транзакций > 0.2%.

## Типичные ошибки

- смешение raw и curated слоя;
- скрытая бизнес-логика в одном [SQL](../../glossary.md#abbr-084)-скрипте;
- отсутствие мониторинга freshness и [SLA](../../glossary.md#abbr-079);
- нет runbook на сбои пайплайна.

## Кросс-ссылки

- [DWH](dwh.md)
- [[Репликация](../../glossary.md#term-056) и backup](../../database/replication.md)
- [Мониторинг и логирование](../../development-process/feature-support/monitoring-logging.md)## Источники

- Fundamentals of Data Engineering.
- Airflow docs: <https://airflow.apache.org/docs/>
- dbt docs: <https://docs.getdbt.com/>
