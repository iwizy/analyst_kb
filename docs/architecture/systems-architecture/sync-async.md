# Синхронное и асинхронное взаимодействие

Выбор между sync и async влияет на пользовательский опыт, надежность и стоимость эксплуатации.

## Сравнение

| Подход | Плюсы | Минусы | Типовые кейсы |
| --- | --- | --- | --- |
| Синхронный (request/response) | простой контроль потока, предсказуемый ответ | каскадные таймауты, tight coupling | login, проверка прав, запрос справки |
| Асинхронный (events/messages) | буферизация нагрузки, слабая связанность | eventual consistency, сложнее observability | billing, уведомления, фоновые процессы |

## Практические требования

### Для sync

- `timeout` на каждом hop;
- `retry` только для идемпотентных операций;
- `circuit breaker` и fallback.

### Для async

- idempotency ключи;
- dead-letter queue и retry policy;
- контроль consumer lag и duplicate handling.

## Типичные ошибки

- длинные синхронные цепочки между сервисами;
- смешение command и event semantics;
- отсутствие явной модели консистентности в требованиях.
