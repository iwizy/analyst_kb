# Монолитная архитектура

Монолит — единое приложение с общей кодовой базой и релизным контуром. Для ранних стадий продукта это часто оптимальный выбор.

## Уровни сложности

### Базовый уровень

- запуск одной codebase и одной deployment единицы;
- быстрый старт и низкий инфраструктурный overhead;
- простая локальная отладка.

### Средний уровень

- модульные границы внутри монолита;
- контроль зависимостей и архитектурные тесты;
- подготовка к постепенной декомпозиции.

### Продвинутый уровень

- масштабирование монолита (read replicas, background workers);
- extraction стратегией Strangler Fig;
- разделение ownership по доменным модулям.

## Структура и схема

```kroki-plantuml
@startuml
left to right direction
actor User
rectangle "Monolith App" as M {
  rectangle "UI" as UI
  rectangle "Domain Modules" as D
  rectangle "Integration Adapters" as I
}
database "Shared DB" as DB
User --> UI
UI --> D
D --> I
D --> DB
@enduml
```

## Преимущества

- быстрый time-to-market;
- простая согласованность транзакций;
- единый pipeline и меньше распределенных рисков.

## Недостатки

- со временем растет время сборки/тестов;
- сложнее независимое масштабирование частей;
- риск «big ball of mud» без модульности.

## Когда оправдан

- MVP и startup-фаза;
- ограниченные ресурсы DevOps/SRE;
- домен еще меняется и границы не стабилизированы.

## Антипаттерны

- отсутствие модулей и четких контрактов внутри приложения;
- смешение доменной и инфраструктурной логики;
- поздний и резкий "взрывной" переход в микросервисы.

## Практические рекомендации

1. Выделяйте bounded contexts внутри монолита.
2. Запрещайте межмодульный доступ в обход API.
3. Измеряйте coupling между модулями.
4. Готовьте точки расширения для Strangler миграции.

## Контрольные вопросы

1. Почему монолит сейчас выгоднее микросервисов?
2. Какие модули потенциально станут первыми кандидатами на выделение?
3. Какие NFR риски монолит уже не покрывает?
4. Как измеряется технический долг монолита?

## Чек-лист самопроверки

- внутри монолита определены модульные границы;
- есть архитектурные тесты зависимостей;
- определены доменные owners;
- есть план эволюции без big-bang;
- есть метрики build/test/release time.

## Стандарты и источники

- Martin Fowler, Monolith First articles.
- Sam Newman, migration patterns references.
