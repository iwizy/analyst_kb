# Архитектурные паттерны и антипаттерны

Паттерн - повторяемое решение типовой проблемы. Антипаттерн - решение, которое кажется удобным в моменте, но создает системный долг.

## Часто используемые архитектурные паттерны

| Паттерн | Что решает | Риски |
| --- | --- | --- |
| Circuit Breaker | защита от каскадных отказов внешнего сервиса | неверные пороги срабатывания |
| Retry with Backoff | устойчивость к временным сбоям | усиление нагрузки при некорректном retry |
| Bulkhead | изоляция ресурсов между потоками/сервисами | сложность конфигурации |
| Strangler Fig | постепенная замена legacy | долгий период двойной поддержки |
| CQRS | разделение read/write модели | усложнение консистентности |
| Event Sourcing | полная история изменений | сложность реконструкции состояния |

## Ключевые антипаттерны

- Distributed Monolith: сервисы выделены, но релиз и изменения несамостоятельны.
- Shared Database как основная интеграция: высокая связность и сложная эволюция.
- God Service: один сервис владеет множеством несвязанных доменов.
- Chatty Integration: избыточно много синхронных вызовов на один сценарий.
- Golden Hammer: применение одного архитектурного подхода ко всем задачам.

## Как оценивать архитектурное решение

1. Какая конкретная проблема решается?
1. Какие новые риски и операционные требования появляются?
1. Как измерить эффект (latency, error rate, lead time)?
1. Какой план отката или эволюции?

## Практика аналитика

- фиксируйте архитектурные решения в ADR;
- связывайте паттерн с нефункциональными требованиями;
- проверяйте, что команда готова поддерживать выбранную сложность.
