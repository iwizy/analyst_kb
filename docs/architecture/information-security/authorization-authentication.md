# Авторизация и аутентификация

> Глоссарий терминов и сокращений: [Открыть](../../glossary.md)


Аутентификация отвечает на вопрос "кто пользователь", авторизация - "что ему
разрешено". Ошибки в этих механизмах приводят к прямым инцидентам безопасности.

## Базовые различия

- Authentication: проверка личности (пароль, MFA, сертификат, SSO).
- Authorization: проверка прав (RBAC, ABAC, policy-based access).

## Типовой сценарий веб-приложения

```kroki-plantuml
@startuml
actor User
participant "Auth Service" as Auth
participant "API" as API
participant "Policy Engine" as P

User -> Auth : Логин + MFA
Auth --> User : Access token
User -> API : Запрос + token
API -> P : Проверка прав
P --> API : allow/deny
API --> User : Ответ
@enduml
```

## Практические рекомендации

- разделяйте lifecycle token (короткий access, обновляемый refresh);
- храните секреты и ключи в защищенном хранилище;
- логируйте события входа, эскалации прав и отказа в доступе.

## Типичные ошибки

- смешение бизнес-ролей и технических ролей в одной модели;
- отсутствие ревизии прав после оргизменений;
- вечные токены и слабый контроль сессий.

## Чек-лист качества

- Для каждой операции зафиксирована required role/policy.
- MFA включен для административных и критичных контуров.
- Есть автоматический отзыв прав при увольнении или смене роли.

## Практическое дополнение

1. Перед применением подхода зафиксируйте измеримую цель (SLA, lead time, error rate, time-to-market).
1. На архитектурном review проверяйте соответствие решения ограничениям безопасности, интеграций и эксплуатации.
1. Добавляйте в backlog минимум одну задачу на снижение архитектурного риска для каждой high-impact зоны.
