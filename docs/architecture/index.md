# Проектирование и архитектура

Раздел оформлен как системный курс: от выбора архитектурного стиля до отказоустойчивости, интеграционного взаимодействия и архитектурной эволюции.

## Что покрывает курс

1. Выбор архитектурного стиля под контекст продукта.
1. Проектирование домена и границ ответственности (DDD).
1. Архитектурные паттерны и анти-паттерны.
1. Синхронное/асинхронное взаимодействие, кэширование, оркестрация/хореография.
1. Масштабирование, отказоустойчивость, API Gateway и Service Mesh.
1. Security, observability и эксплуатационные ограничения.

## Архитектурные стили: когда и зачем

| Стиль | Сильные стороны | Ограничения | Когда выбирать |
| --- | --- | --- | --- |
| Монолит | Простота запуска и сопровождения на старте | Сложность масштабирования команд и релизов | Малые и средние продукты с стабильным доменом |
| Модульный монолит | Баланс простоты и модульности | Требует дисциплины границ модулей | Рост продукта без преждевременного микросервисинга |
| Микросервисы | Независимые релизы и масштабирование | Операционная сложность, распределенные риски | Крупные домены и зрелая инженерная платформа |
| Многослойная архитектура | Понятное разделение обязанностей | Риск «толстых» слоев и связности | Корпоративные системы с устоявшимися процессами |
| SOA | Интеграционная зрелость и стандартизация | Возможная тяжеловесность governance | Enterprise-контуры с множеством систем |
| Peer-to-peer | Отсутствие единой точки отказа | Сложность согласованности и управления | Специализированные распределенные сценарии |
| Микрофронтенды | Независимость фронт-команд | Сложность UX-консистентности и платформы | Большие продуктовые экосистемы |

## Ключевые архитектурные подходы

- GoF-паттерны: Singleton, Factory, Observer и др.;
- DDD: bounded context, aggregates, ubiquitous language;
- Hexagonal architecture: порты/адаптеры;
- Event Sourcing и CQRS;
- C4-моделирование архитектуры на уровнях контекста/контейнеров/компонентов.

## Карта архитектурного проектирования

```kroki-plantuml
@startuml
left to right direction
rectangle "Business Goals" as G
rectangle "Domain & Bounded Contexts" as D
rectangle "Architecture Style" as S
rectangle "Interaction Patterns" as I
rectangle "Scalability & Resilience" as R
rectangle "Operations & Security" as O

G --> D
D --> S
S --> I
I --> R
R --> O
@enduml
```

## Практический маршрут

1. Определить доменные границы и ключевые пользовательские потоки.
1. Выбрать стиль архитектуры по критериям масштаба и рисков.
1. Зафиксировать контракт взаимодействий (sync/async, API/events).
1. Спроектировать устойчивость (retry, breaker, failover, DR).
1. Подготовить C4-диаграммы и ADR для ключевых решений.

## Кейсы по доменам

### Финтех

- приоритет: консистентность, аудит, безопасность;
- подход: модульный монолит или сервисы с жестким governance;
- паттерны: CQRS/Saga для распределенных операций, сильный observability.

### E-commerce

- приоритет: масштабируемость и скорость изменений;
- подход: модульный монолит -> микросервисы при росте;
- паттерны: event-driven, кэширование, API gateway.

### Госуслуги

- приоритет: надежность, регуляторика, долговременная поддержка;
- подход: многослойная/SOA с формализованными контрактами;
- паттерны: строгая версионизация интеграций и контроль качества данных.

## Первоисточники

- C4 model: <https://c4model.com/>
- Domain-Driven Design Reference: <https://domainlanguage.com/ddd/reference/>
- The Open Group TOGAF: <https://www.opengroup.org/togaf>
- OWASP ASVS (security): <https://owasp.org/www-project-application-security-verification-standard/>
- Google SRE Workbook: <https://sre.google/workbook/table-of-contents/>

## Переход к подразделам

- [Архитектура информационных систем](systems-architecture/index.md)
- [Подходы к проектированию](design-approaches/index.md)
- [Декомпозиция задач](task-decomposition.md)
- [Архитектура предприятия](enterprise-architecture/index.md)
- [Пользовательский интерфейс (UI/UX)](ui-ux/index.md)
- [Информационная безопасность](information-security/index.md)

## Контрольные вопросы

- Какой стиль архитектуры выбран и почему он лучше альтернатив в текущем контексте?
- Где проходит граница bounded contexts и какие интеграционные контракты между ними?
- Какие риски отказоустойчивости покрыты архитектурой, а какие нет?
- Как обеспечивается масштабирование без потери управляемости?
- Какие архитектурные решения зафиксированы в ADR/C4?
