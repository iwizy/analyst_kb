# Практический playbook архитектурных решений
Страница фиксирует прикладной алгоритм выбора архитектурного стиля и паттернов с учетом требований, рисков, команды и эксплуатационных ограничений.

## Уровни сложности

### Базовый уровень

- применять базовую матрицу выбора архитектурного стиля;
- формулировать ключевые архитектурные драйверы;
- документировать решение в кратком [ADR](../glossary.md#abbr-003).

### Средний уровень

- учитывать trade-off между latency, масштабируемостью и сложностью поддержки;
- выбирать паттерны взаимодействия и надежности под контекст;
- планировать эволюцию архитектуры без остановки продукта.

### Продвинутый уровень

- строить roadmap архитектурных изменений на горизонте 6-18 месяцев;
- управлять multi-team зависимостями и технологическими ограничениями;
- внедрять architecture governance через review и метрики.

## Алгоритм выбора архитектуры

1. Зафиксировать бизнес-цели и критичные [NFR](../glossary.md#abbr-053).
2. Определить профиль нагрузки: read/write, peak, география, [SLA](../glossary.md#abbr-079).
3. Оценить командный контекст: размер, зрелость DevOps, скорость изменений.
4. Сформировать shortlist архитектурных стилей.
5. Сравнить варианты по trade-off и стоимости владения.
6. Зафиксировать решение в ADR и plan B (fallback/migration path).

## Матрица выбора стиля

| Контекст | Рекомендуемый стиль | Почему |
| --- | --- | --- |
| MVP/стартап, 1-2 команды | монолит или модульный монолит | быстрый старт и низкая операционная сложность |
| зрелый продукт, частые независимые релизы | микросервисы | независимое масштабирование и автономия команд |
| интеграция legacy-контуров | SOA/гибрид | контролируемая декомпозиция с контрактами |
| event-heavy домен | event-driven | слабая связность и масштабируемая обработка событий |
| переменная нагрузка и короткие задачи | serverless | эластичность и pay-as-you-go |

## Практические сценарии

### Сценарий 1. Monolith -> Modular monolith

Когда: растущий продукт с частыми конфликтами в кодовой базе, но без готовности к полной микросервисной модели.

| Шаг | Результат |
| --- | --- |
| выделить bounded contexts | понятные границы модулей |
| внедрить внутренние API модулей | снижение связности |
| ввести архитектурные тесты | защита границ |

### Сценарий 2. Modular monolith -> Microservices

Когда: требуется независимый релиз отдельных бизнес-направлений и разная динамика масштабирования.

| Шаг | Результат |
| --- | --- |
| выбрать 1-2 сервиса-кандидата | ограниченный риск миграции |
| внедрить [API Gateway](../glossary.md#abbr-006) и observability | управляемый внешний/внутренний трафик |
| внедрить [Saga](../glossary.md#abbr-078) для распределенных операций | контролируемая консистентность |

### Сценарий 3. Внедрение event-driven контура

Когда: потоковые события критичны для бизнеса (уведомления, аналитика, реактивные процессы).

| Ключевая практика | Что дает |
| --- | --- |
| transactional outbox | надежная публикация событий |
| schema evolution policy | совместимость продюсеров и консьюмеров |
| DLQ + retry policy | устойчивость к частичным сбоям |

## Шаблон архитектурного решения (краткий ADR)

| Поле | Описание |
| --- | --- |
| Контекст | какие ограничения и драйверы действуют |
| Решение | выбранный стиль и паттерны |
| Альтернативы | что рассматривали и почему отклонили |
| Последствия | плюсы, риски, долг |
| Метрики успеха | latency, availability, lead time, incident rate |

## Типичные ошибки

- выбор "модного" стиля без бизнес-обоснования;
- ранняя декомпозиция на микросервисы без зрелой платформы;
- отсутствие плана миграции и обратного пути;
- недооценка операционной стоимости распределенной системы.

## Связанные материалы

- [Введение в архитектуру](index.md)
- [Архитектура информационных систем](systems-architecture/index.md)
- [Синхронное и асинхронное взаимодействие](systems-architecture/sync-async.md)
- [Масштабирование сервисов](systems-architecture/service-scaling.md)
- [Отказоустойчивость](systems-architecture/resilience.md)
- [Практические кейсы и миграции](systems-architecture/practical-cases.md)

## Источники

- ISO/IEC/IEEE 42010: <https://www.iso.org/standard/50508.html>
- Software Architecture in Practice.
- Building Evolutionary Architectures.
