# Blockchain и смарт-контракты

Blockchain это тип распределенного реестра, где транзакции объединяются в блоки и связываются хешами. Смарт-контракт это программа в сети, автоматически исполняющая бизнес-правила.

## Базовые компоненты

- транзакции;
- блоки;
- хеш-связь блоков;
- консенсус;
- узлы-валидаторы.

## Пример смарт-контракта (Solidity)

```solidity
pragma solidity ^0.8.20;

contract Escrow {
    address public buyer;
    address public seller;
    uint256 public amount;

    constructor(address _seller) payable {
        buyer = msg.sender;
        seller = _seller;
        amount = msg.value;
    }

    function release() external {
        require(msg.sender == buyer, "only buyer");
        payable(seller).transfer(amount);
    }
}
```

## Пример сценария

Escrow-сделка:

1. Покупатель депонирует сумму в контракте.
1. Продавец отгружает товар.
1. Покупатель подтверждает получение.
1. Контракт автоматически переводит средства продавцу.

## Достоинства

- автоматизация исполнения договоренностей;
- прозрачность и проверяемость состояния;
- уменьшение роли посредников.

## Ограничения

- ошибки в коде контракта сложно исправлять;
- стоимость операций в сети может быть высокой;
- ограничения throughput и latency;
- необходимость внешних oracle для off-chain данных.

## Где применять осторожно

- high-frequency транзакции с жесткими SLA;
- сценарии с требованием мгновенной отмены/редактирования данных;
- кейсы, где закон требует полного удаления персональных данных.

## Практические рекомендации

- проводить аудит смарт-контрактов перед продом;
- использовать upgrade pattern осознанно и документированно;
- отделять on-chain факты и off-chain операционные данные;
- проектировать процедуру аварийной остановки (circuit breaker).

## Смежные материалы

- [Распределенные реестры](index.md)
- [Консистентность и распределение](../consistency-and-distribution.md)
