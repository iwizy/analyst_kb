# Бэкапирование данных

Бэкап это отдельный процесс защиты данных от ошибок, сбоев и атак. Репликация не заменяет бэкап: она копирует и ошибки тоже.

## Цель

- гарантировать восстановление данных и сервиса в заданные RPO/RTO;
- снизить риск потери критичных транзакций;
- обеспечить соответствие регуляторным требованиям хранения.

## Базовые типы бэкапа

- Full: полная копия;
- Incremental: только изменения с последнего бэкапа;
- Differential: изменения с последнего полного;
- Snapshot: снимок состояния на уровне storage/engine.

## Стратегия 3-2-1

- минимум 3 копии данных;
- на 2 разных носителях;
- 1 копия вне основного контура (off-site/offline).

## Практический процесс

1. Определить RPO/RTO для каждого сервиса.
1. Настроить расписание и ротацию.
1. Шифровать и проверять целостность копий.
1. Регулярно тестировать восстановление.
1. Вести runbook и журнал тестов восстановления.

## Пример

```text
RPO: 15 минут
RTO: 1 час
Full backup: ежедневно 02:00
Incremental: каждые 15 минут
Retention: 35 дней + месячные архивы
```

## Типичные ошибки

- бэкапы есть, но restore ни разу не проверялся;
- хранение копий в том же failure-domain;
- отсутствие шифрования резервных копий;
- ротация не настроена, хранилище переполняется.

## Практические рекомендации

- тестировать восстановление минимум раз в квартал;
- разделять backup для OLTP и аналитических контуров;
- мониторить не только факт бэкапа, но и успешность verify/restore;
- хранить immutable/offline копии для защиты от ransomware.

## Смежные материалы

- [Реплицирование данных](replication.md)
- [Масштабирование БД](scaling/index.md)
