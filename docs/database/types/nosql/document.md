# Документо-ориентированные базы данных

Документо-ориентированные БД хранят данные в JSON/BSON-документах. Модель удобна, когда объект предметной области естественно представляется вложенной структурой и часто эволюционирует.

## Примеры систем

- MongoDB
- Couchbase
- CouchDB
- Amazon DocumentDB

## Типовой документ

```json
{
  "order_id": "ORD-100245",
  "customer": {
    "id": "C-932",
    "name": "Ирина Котова"
  },
  "items": [
    {"sku": "SKU-1", "qty": 1, "price": 4200},
    {"sku": "SKU-2", "qty": 2, "price": 750}
  ],
  "status": "paid",
  "created_at": "2026-02-09T10:15:00Z"
}
```

## Пример запросов (MongoDB)

```javascript
db.orders.find({ status: "paid", "customer.id": "C-932" })

db.orders.aggregate([
  { $match: { status: "paid" } },
  { $group: { _id: "$customer.id", total: { $sum: { $sum: "$items.price" } } } }
])
```

## Достоинства

- гибкая схема и быстрые изменения модели;
- естественное хранение nested-структур;
- удобство для API-first разработки;
- хорошая горизонтальная масштабируемость.

## Недостатки

- JOIN ограничены или отсутствуют;
- риск дублирования данных при денормализации;
- сложнее поддерживать строгие cross-document транзакции на больших объемах;
- требуется дисциплина версионирования схемы документов.

## Области применения

- каталоги товаров;
- пользовательские профили;
- CMS и контентные платформы;
- event payload storage.

## Практические рекомендации

- выбирать ключи и индексы от top-N запросов;
- ограничивать глубину вложенности документов;
- фиксировать контракт полей через schema validation;
- избегать бесконтрольного роста массивов в одном документе.

## Смежные материалы

- [Ключ-значение](key-value.md)
- [Колоночные базы данных](columnar.md)
- [Консистентность и распределение](../../consistency-and-distribution.md)
