# Графовые базы данных

Графовые БД хранят данные как узлы и связи. Они эффективны, когда ключевая ценность в traversing-операциях: поиск путей, соседей, зависимостей и аномальных связей.

## Примеры систем

- Neo4j
- Amazon Neptune
- JanusGraph
- ArangoDB
- TigerGraph

## Пример модели

```text
(User)-[:BOUGHT]->(Product)
(User)-[:FRIEND]->(User)
(Product)-[:IN_CATEGORY]->(Category)
```

## Пример запроса (Cypher)

```cypher
MATCH (u:User {id: "u-932"})-[:FRIEND]->(:User)-[:BOUGHT]->(p:Product)
WHERE NOT (u)-[:BOUGHT]->(p)
RETURN p.name, count(*) AS score
ORDER BY score DESC
LIMIT 10;
```

## Достоинства

- быстрые traversal-запросы на сложных связях;
- естественная модель для relation-heavy доменов;
- гибкая эволюция модели связей.

## Недостатки

- не лучший выбор для классического табличного OLTP;
- сложнее масштабирование в некоторых движках;
- требуется команда с опытом graph-моделирования.

## Области применения

- рекомендательные системы;
- anti-fraud и AML;
- knowledge graph;
- управление зависимостями и impact analysis.

## Практические рекомендации

- четко моделировать типы узлов и ребер;
- добавлять индексы на lookup-атрибуты узлов;
- контролировать глубину traversal в online-запросах;
- тяжелую граф-аналитику выносить в отдельные job.

## Смежные материалы

- [Распределенные реестры](../../distributed-ledgers/index.md)
- [Поисковые базы данных](search.md)
