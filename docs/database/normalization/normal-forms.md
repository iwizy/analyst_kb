# Нормальные формы

Нормализация базы данных — это процесс структурирования данных в реляционной базе для минимизации избыточности и предотвращения аномалий при вставке, обновлении или удалении данных. Этот процесс делится на несколько этапов, называемых нормальными формами (НФ). Каждая последующая форма накладывает дополнительные ограничения.

## Первая нормальная форма (1НФ)

Таблица находится в 1НФ, если:

- Все значения атомарны: каждое поле содержит только одно значение, а не набор данных (например, списки или массивы).
- Каждая строка уникальна: в таблице должен быть идентификатор (первичный ключ).
- Отсутствуют повторяющиеся группы: значения не должны быть организованы в массивы или многозначные поля.

### Пример

Таблица до нормализации (ненормализованная):

Проблема: Столбец "Телефоны" содержит несколько значений в одной ячейке. Это нарушает принцип атомарности.

Таблица после нормализации (в 1НФ):

Теперь каждая ячейка таблицы содержит только одно значение.

## Вторая нормальная форма (2НФ)

Таблица находится во 2НФ, если:

- Она находится в 1НФ.
- Все неключевые атрибуты (поля, которые не являются частью первичного ключа) зависят от всего первичного ключа, а не только от его части (в случае составного ключа).

### Пример

Таблица, не находящаяся во 2НФ:

Проблема:

- КурсНазвание зависит только от КурсID.

- СтудентИмя зависит только от СтудентID.

- Эти зависимости не относятся ко всему составному ключу (КурсID + СтудентID).
  Таблица после нормализации (во 2НФ):

- Таблица Курсы:

- Таблица Студенты:

- Таблица Связей:
  Теперь каждая таблица содержит данные, полностью зависящие от своего первичного ключа.

## Третья нормальная форма (3НФ)

Таблица находится в 3НФ, если:

- Она находится во 2НФ.
- У неключевых полей нет транзитивной зависимости от первичного ключа (неключевое поле зависит только от первичного ключа, а не от другого неключевого поля).

### Пример

Таблица, не находящаяся в 3НФ:

Проблема: Поле ГородНазвание зависит не от СтудентID, а от ГородID. Это транзитивная зависимость.

Таблица после нормализации (в 3НФ):

- Таблица Студенты:
- Таблица Города:
  Теперь каждая таблица содержит данные, которые зависят только от её собственного ключа.

## Бойс-Кодд нормальная форма (BCNF)

Таблица находится в BCNF, если:

- Она находится в 3НФ.
- Каждый детерминант (поле, от которого зависят другие) является кандидатом на первичный ключ.

### Пример

Таблица, не находящаяся в BCNF:

Проблема: Поле Преподаватель определяет Аудиторию, но Преподаватель не является ключом.

Таблица после нормализации (в BCNF):

- Таблица Преподаватели и Аудитории:
- Таблица Курсы:
  Теперь каждая зависимость соответствует ключевому правилу.

## Четвёртая нормальная форма (4НФ)

Таблица находится в 4НФ, если:

- Она находится в BCNF.
- Отсутствуют многозначные зависимости между атрибутами.

### Пример

Таблица, не находящаяся в 4НФ:

Проблема: У студента одновременно несколько курсов и хобби, что создаёт избыточность.

Таблица после нормализации (в 4НФ):

- Таблица СтудентыКурсы:
- Таблица СтудентыХобби:
  Теперь каждая зависимость разделена.

## Пятая нормальная форма (5НФ)

Таблица находится в 5НФ, если:

- Она находится в 4НФ.
- Данные нельзя разделить на меньшие таблицы без потери информации. Все зависимости представляются только через соединение.

### Пример

Представьте таблицу, содержащую тройное отношение:

Эта таблица должна быть разделена на три таблицы (связи "многие ко многим") без потери данных:

- Таблица Проекты и Работники.
- Таблица Работники и Навыки.
- Таблица Проекты и Навыки.

## Итог

- 1НФ: Устраняет неатомарные значения.
- 2НФ: Устраняет частичные зависимости.
- 3НФ: Устраняет транзитивные зависимости.
- BCNF: Устраняет нарушения, когда детерминанты не являются ключами.
- 4НФ: Устраняет многозначные зависимости.
- 5НФ: Устраняет проблемы проекции и соединения.
  Нормализация позволяет минимизировать избыточность и повысить целостность данных, однако чрезмерная нормализация может снижать производительность при выполнении запросов.
