# Нормальные формы

Нормальные формы помогают последовательно устранять избыточность и аномалии данных.

## 1NF

Правило: значения атомарны, нет повторяющихся групп.

Антипаттерн:

- `phones = "+7999,+7888"` в одном поле.

Исправление:

- отдельная таблица `customer_phones(customer_id, phone)`.

## 2NF

Правило: неключевые атрибуты зависят от всего составного ключа, а не от его части.

Антипаттерн:

- в таблице `enrollment(student_id, course_id, student_name)` поле `student_name` зависит только от `student_id`.

Исправление:

- вынести `students(student_id, student_name)`.

## 3NF

Правило: нет транзитивных зависимостей между неключевыми атрибутами.

Антипаттерн:

- `employee(employee_id, department_id, department_name)`.

Исправление:

- `departments(department_id, department_name)` и ссылка по FK.

## BCNF

Правило: каждый детерминант должен быть кандидатом в ключ.

Используется, когда 3NF недостаточно для устранения аномалий в сложных зависимостях.

## 4NF

Правило: убрать многозначные независимые зависимости.

Антипаттерн:

- в одной таблице одновременно хранить `student -> course` и `student -> hobby`.

## 5NF

Правило: исключить избыточность, возникающую из join-зависимостей.

Применяется в узких доменах со сложными отношениями many-to-many-to-many.

## Практические рекомендации

- в продуктовой разработке обычно достаточно 3NF + точечные решения BCNF;
- 4NF/5NF применяйте только при явной необходимости;
- избыточную "академическую" нормализацию сверяйте с SLA чтения.

## Мини-чек-лист

- можно ли обновить значение в одном месте без каскадных ручных правок;
- есть ли аномалии вставки/удаления;
- нет ли неявных зависимостей между неключевыми полями;
- не перегружена ли схема JOIN для ключевых запросов.

## Смежные материалы

- [Нормализация и денормализация](index.md)
- [Проектирование модели данных](../data-modeling.md)
